# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type AccountModel {
  accessToken: String
  accessTokenExpiresAt: DateTime
  accountId: String!
  createdAt: DateTime!
  id: String!
  idToken: String
  password: String
  providerId: String!
  refreshToken: String
  refreshTokenExpiresAt: DateTime
  scope: String
  updatedAt: DateTime!
  user: UserModel!
  userId: String!
}

type CategoryModel {
  createdAt: DateTime!
  id: String!
  name: String!
  posts: [PostModel!]
  updatedAt: DateTime!
}

type Comment {
  content: String!
  createdAt: DateTime!
  id: Int!
  post: PostModel
  user: UserModel!
}

input CreatePostInput {
  """Category ID"""
  categoryId: String

  """Post content in JSON format"""
  content: JSON!

  """Post description/excerpt"""
  description: String

  """Whether to publish immediately or save as draft"""
  isPublished: Boolean! = false

  """Main image URL"""
  mainImage: String

  """Post tags"""
  tags: [String!] = []

  """Post title"""
  title: String!
}

input CreateUser {
  avatarUrl: String
  email: String
  name: String!
  password: String
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type DeletePostResponse {
  code: String
  deletedId: String
  message: String!
  success: Boolean!
}

type GetProfileResponse {
  data: JSON
  user: OAuth2UserInfoModel!
}

type GetSessionResponse {
  session: SessionModel!
  user: UserModel!
}

type GitHubUserResponse {
  createdAt: DateTime!
  email: String
  id: String!
  image: String
  name: String
  redirect: String!
  token: String!
  updatedAt: DateTime
  url: String!
  user: UserModel
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type LikeModel {
  createdAt: DateTime!
  id: Int!
  post: PostModel!
  postId: String!
  user: UserModel!
  userId: String!
}

type Mutation {
  """Create a new post (requires authentication)"""
  createPost(input: CreatePostInput!): PostResponse!
  createUser(createUserInput: CreateUser!): UserModel!

  """Delete a post (requires ownership)"""
  deletePost(id: String!): DeletePostResponse!
  gitHub: GitHubUserResponse!

  """Increment post view count"""
  incrementViews(id: String!, identifier: String): PostResponse!
  signInEmail(signInInput: SignInInput!): SignInEmailUser!
  signOut: SignOutResponse!
  signUpEmail(signUpInput: SignUpInput!): SignUpEmailUser!

  """Update a post (requires ownership)"""
  updatePost(id: String!, input: UpdatePostInput!): PostResponse!
  updateProfile(avatarUrl: String, email: String, name: String, password: String, rememberMe: Boolean): UserModel!
}

type OAuth2UserInfoModel {
  email: String
  emailVerified: Boolean
  id: String!
  image: String
  name: String
}

type PaginatedPostsResponse {
  """Array of items"""
  data: [PostModel!]!
  message: String

  """Pagination metadata"""
  meta: PaginationMeta!
  success: Boolean!
}

type PaginationMeta {
  """Has next page"""
  hasNext: Boolean!

  """Has previous page"""
  hasPrev: Boolean!

  """Items per page"""
  limit: Int!

  """Current page number"""
  page: Int!

  """Total number of items"""
  total: Int!

  """Total number of pages"""
  totalPages: Int!
}

input PostFiltersInput {
  """Filter by author ID"""
  authorId: String

  """Filter by category ID"""
  categoryId: String

  """Show only priority posts"""
  isPriority: Boolean

  """Show only published posts"""
  isPublished: Boolean
  limit: Int = 10
  page: Int = 1

  """Search term for title/description"""
  search: String

  """Sort by field"""
  sortBy: String = "createdAt"

  """Sort order"""
  sortOrder: String = "desc"

  """Filter by post status"""
  status: PostStatusFilter

  """Filter by tags"""
  tags: [String!]
}

type PostModel {
  authorId: String!
  category: CategoryModel
  categoryId: String
  content: JSON!
  createdAt: DateTime!
  description: String
  id: String!
  isDeleted: Boolean!
  isPinned: Boolean!
  isPriority: Boolean!
  isPublished: Boolean!
  mainImage: String
  slug: String!
  tags: [String!]!
  title: String!
  updatedAt: DateTime!
  user: UserModel!
  views: Int!
  votes: Int!
}

type PostResponse {
  """Response data"""
  data: PostModel
  message: String
  success: Boolean!
}

"""Filter posts by their status"""
enum PostStatusFilter {
  """Approved posts"""
  APPROVED

  """Posts in draft state"""
  DRAFT

  """Posts pending approval"""
  PENDING

  """Published posts"""
  PUBLISHED

  """Rejected posts"""
  REJECTED

  """Unpublished posts"""
  UNPUBLISHED
}

type PostsArrayResponse {
  """Total count"""
  count: Int!

  """Array of items"""
  data: [PostModel!]!
  message: String
  success: Boolean!
}

type Query {
  getAccounts: [AccountModel!]!
  getProfile: GetProfileResponse!
  getSession: GetSessionResponse!

  """Get current user's posts"""
  myPosts(filters: PostFiltersInput!): PaginatedPostsResponse!

  """Get a single post by ID"""
  post(id: String!): PostResponse!

  """Get a single post by slug"""
  postBySlug(slug: String!): PostResponse!

  """Get posts with filters and pagination"""
  posts(filters: PostFiltersInput): PaginatedPostsResponse!
  priorityPosts(limit: Int! = 10): PostsArrayResponse!

  """Get only published posts"""
  publishedPosts(filters: PostFiltersInput!): PaginatedPostsResponse!
}

type SessionModel {
  createdAt: DateTime!
  expiresAt: DateTime!
  id: String!
  ipAddress: String!
  token: String!
  updatedAt: DateTime!
  user: UserModel!
  userAgent: String!
  userId: String!
}

type SignInEmailUser {
  redirect: String!
  token: String!
  url: String!
  user: SignInEmailUserResponse!
}

type SignInEmailUserResponse {
  createdAt: DateTime!
  email: String
  id: String!
  image: String
  name: String
  updatedAt: DateTime
}

input SignInInput {
  callbackURL: String
  email: String!
  password: String!
  rememberMe: Boolean
}

type SignOutResponse {
  success: Boolean!
}

type SignUpEmailResponse {
  email: String
  id: String!
  image: String
  name: String
}

type SignUpEmailUser {
  token: String
  user: SignUpEmailResponse!
}

input SignUpInput {
  avatarUrl: String
  email: String!
  name: String!
  password: String!
  rememberMe: Boolean
}

input UpdatePostInput {
  categoryId: String
  content: JSON
  description: String
  isPinned: Boolean
  isPriority: Boolean
  isPublished: Boolean
  mainImage: String
  slug: String
  tags: [String!]
  title: String
}

type UserModel {
  accounts: [AccountModel!]!
  avatarUrl: String
  comments: [Comment!]!
  createdAt: DateTime!
  email: String
  emailVerified: Boolean!
  id: String!
  image: String
  likes: [LikeModel!]!
  name: String
  sessions: [SessionModel!]!
  updatedAt: DateTime
}